<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:wfv="com.wefootball.validators.*" 
	label="Personal Information" >
	
	<mx:Script>
		<![CDATA[
			import com.wefootball.model.User;
    		import mx.rpc.events.ResultEvent;
    		import mx.rpc.events.FaultEvent;
    		import mx.collections.ArrayCollection;

 			[Bindable]
			public var user:User = null;
			public function set userId(i:String):void {
				getUser(i);
			}
			public function refreshBinding():void {
				var tmp:User = user;
				user = null;
				user = tmp;
			}
			public function refresh():void {
				if (user != null && user.id != "") getUser(user.id);
			}
			private function getUser(id:String):void {
  				User.show(id,
						  handleSuccess,
						  handleFault);
			}
			private function handleSuccess(u:User, event:ResultEvent):void {
   				user = u;
			}
			private function handleFault(event:FaultEvent):void {
			}
			
			private var _foottotext:Object = {
				'L':'左脚', 'R':'右脚', 'B':'左右开弓'
			}
			private function foottotext(f:String):String {
				return _foottotext[f]
			}
			private var _postotext:Object = {
				'GK':'门将', 'SW':'清道夫', 'CB':'中后卫', 'LB':'左后卫',
				'RB':'右后卫', 'DM':'后腰', 'CM':'中前卫', 'LM':'左前卫',
				'RM':'右前卫', 'AM':'前腰', 'SS':'前锋', 'CF':'中锋'
			}
			internal function postotext(f:String):String {
				return _postotext[f]
			}
		]]>
	</mx:Script>
	
	<mx:Form labelWidth="100" width="600">
		<mx:FormItem label="昵称" >
			<mx:Label text="{user.nickname}"/>
		</mx:FormItem>
		<mx:FormItem label="身高" >
			<mx:Label text="{user.height>0 ? user.height+'cm' : ''}"/>
		</mx:FormItem>
		<mx:FormItem label="体重" >
			<mx:Label text="{user.weight>0 ? user.weight+'kg' : ''}" />
		</mx:FormItem>
	    <mx:FormItem label="生日" >
	        <mx:Label text="{df.format(user.birthday)}" />
	    </mx:FormItem>
		<mx:FormItem label="惯用脚" >
			<mx:Label text="{foottotext(user.fitfoot)}" />
	    </mx:FormItem>
	    <mx:FormItem label="适合的位置" >
			<mx:TileList dataProvider="{user.positions}"  
				borderStyle="none" width="300" height="80"
				columnCount="4" textAlign="left">
				<mx:itemRenderer>
					<mx:Component>
						<mx:CheckBox label="{outerDocument.postotext(data.toString())}" selected="true" mouseEnabled="false" />
					</mx:Component>
				</mx:itemRenderer>
			</mx:TileList>
	    </mx:FormItem>
	    <mx:FormItem label="个人简介" >
	   	   	<mx:Text text="{user.summary}" width="285" height="100"/>   
	    </mx:FormItem>	   
	</mx:Form>
	<mx:DateFormatter id="df" formatString="YYYY-MM-DD" />
</mx:VBox>

