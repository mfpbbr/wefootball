<?xml version="1.0" encoding="utf-8"?>
<mx:VDividedBox width="625" height="100%"  xmlns="*" xmlns:mx="http://www.adobe.com/2006/mxml" initialize="refresh()" xmlns:message="com.wefootball.components.message.*">
<!--<mx:VBox>-->

<mx:Metadata>
	[Event(name="userDisplay", type="com.wefootball.events.UserDisplayEvent")]
	[Event(name="messageReply", type="com.wefootball.events.MessageDetailEvent")]
</mx:Metadata>

	   <mx:Script>
    	<![CDATA[
    		import mx.collections.ArrayCollection;
    		import mx.controls.LinkButton;
    		import com.wefootball.events.MessageDetailEvent;
    		import mx.controls.Alert;
    		import mx.rpc.events.ResultEvent;
    		import mx.rpc.events.FaultEvent;
    		import com.wefootball.events.UserDisplayEvent;
    		import com.wefootball.model.User;
    		import com.wefootball.model.Message;
    		import mx.collections.XMLListCollection;

			[Bindable]
    		private var sendMessageList:ArrayCollection;
    		[Bindable]
			private var receiveMessageList:ArrayCollection;  		
			
     		public function refresh():void{	
     			Message.list(handleMessageListResult,handleMessageFaultListResult); 
     		}
     		public function handleMessageListResult(event:ResultEvent, sendList:ArrayCollection, recieveList:ArrayCollection):void{
     			this.sendMessageList = sendList;
     			this.receiveMessageList = recieveList;
     		} 	
     		public function handleMessageFaultListResult(event:FaultEvent):void{
     			Alert.show("读取消息列表失败");
     		}
     		private function displayMessage(m:MessageDetailEvent):void {
				messageDetailBox.messageId = m.message.id;
			}
     		
    	]]>
    </mx:Script>
	<mx:TabNavigator width="100%" height="100%" >
	    <mx:Canvas label="收件箱" >
			<message:MessageListBox messageDisplay="displayMessage(event)"
				dataProvider="{receiveMessageList}" width="100%" height="100%" sendBox="false"/>
	    </mx:Canvas>
	    <mx:Canvas label="发件箱" >
	    	<message:MessageListBox messageDisplay="displayMessage(event)"
	    		dataProvider="{sendMessageList}" width="100%" height="100%" sendBox="true"/>
	    </mx:Canvas>
	</mx:TabNavigator>
	<message:MessageDetailBox id="messageDetailBox" width="100%" height="100%"/>	
</mx:VDividedBox>