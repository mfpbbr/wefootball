<?xml version="1.0" encoding="utf-8"?>
<mx:DataGrid dataProvider="{teamList}" xmlns:mx="http://www.adobe.com/2006/mxml" >

<mx:Metadata>
	[Event(name="teamDisplay", type="com.wefootball.events.TeamDetailEvent")]
	[Event(name="userDisplay", type="com.wefootball.events.UserEvent")]
</mx:Metadata>

	   <mx:Script>
    	<![CDATA[
    		import mx.collections.ArrayCollection;
    		import mx.controls.LinkButton;
    		import com.wefootball.events.TeamDetailEvent;
    		import mx.controls.Alert;
    		import mx.rpc.events.ResultEvent;
    		import mx.rpc.events.FaultEvent;
    		import com.wefootball.events.UserEvent;
    		import com.wefootball.model.User;
    		import com.wefootball.model.Team;
    		
    		[Bindable]
    		public var sendBox:Boolean = false;
    		
    		[Bindable]
    		public var teamList:ArrayCollection = new ArrayCollection;
    		
    		public function refreshTeamList(uid:String):void{	
     			Team.list(uid,handleTeamListResult,handleTeamListFaultResult); 
     		}
     		public function handleTeamListResult(event:ResultEvent, tl:ArrayCollection):void{
     			this.teamList = tl;
     		} 	
     		public function handleTeamListFaultResult(event:FaultEvent):void{
     			Alert.show("读取球队列表失败");
     		}
			
     		internal function displayTeamDetail(data:Object):void{
     			var e:TeamDetailEvent = new TeamDetailEvent("teamDisplay")
     			e.team = Team(data);
     			dispatchEvent(e);
     		}
    	]]>
    </mx:Script>

	<mx:columns >
		<mx:DataGridColumn headerText="球队名称" dataField="name">
			<mx:itemRenderer >
				<mx:Component>
				<mx:LinkButton label="{data.name}" click="outerDocument.displayTeamDetail(data)"
					textAlign="left" fontWeight="normal"/>
				</mx:Component>
			</mx:itemRenderer>
		</mx:DataGridColumn>
		<mx:DataGridColumn headerText="创建时间" width="150" dataField="found_time">
			<mx:itemRenderer>
				<mx:Component>
					<mx:Label text="{outerDocument.df.format(data.found_time)}"/>
				</mx:Component>
			</mx:itemRenderer>
		</mx:DataGridColumn>
	</mx:columns>
    <mx:DateFormatter id="df" formatString="YYYY-MM-DD" />
 
</mx:DataGrid>