<?xml version="1.0" encoding="utf-8"?>
<mx:VDividedBox width="625" height="100%"  xmlns="*" xmlns:mx="http://www.adobe.com/2006/mxml" 
	initialize=" refreshTeamInvitationList()" xmlns:message="com.wefootball.components.message.*" xmlns:team="com.wefootball.components.team.*">
<!--<mx:VBox>-->

<mx:Metadata>
	[Event(name="teamDisplay", type="com.wefootball.events.TeamDetailEvent")]
</mx:Metadata>

	   <mx:Script>
    	<![CDATA[
    		import mx.collections.ArrayCollection;
    		import mx.controls.LinkButton;
    		import com.wefootball.events.TeamDetailEvent;
    		import mx.controls.Alert;
    		import mx.rpc.events.ResultEvent;
    		import mx.rpc.events.FaultEvent;
    		import com.wefootball.events.UserEvent;
    		import com.wefootball.model.User;
    		import com.wefootball.model.Team;
    		import com.wefootball.model.TeamInvitation;
    		import mx.collections.XMLListCollection;

			[Bindable]
    		private var teamList:ArrayCollection;
    		[Bindable]	
			private var teamInvitationList:ArrayCollection;
     		
     		public function refreshTeamInvitationList():void{	
     			TeamInvitation.listTeamInvitations(handleTeamInvitationListResult,handleTeamInvitationListFaultResult); 
     		}
     		public function handleTeamInvitationListResult(event:ResultEvent, til:ArrayCollection):void{
     			this.teamInvitationList = til; 
     		} 	
     		public function handleTeamInvitationListFaultResult(event:FaultEvent):void{
     			Alert.show("读取球邀请队列表失败");
     		}
		 	
		 	private function handleTabChange():void
			{
				if(myTeamTN.selectedChild == myJoinTeamPage)
				{
					myJoinTeamListBox.refreshTeamList(User.currentUser.id);		
				}
			}		 	
	 	
    	]]>
    </mx:Script>
		<mx:TabNavigator id="myTeamTN" width="100%" height="49%" change="handleTabChange()">
		    <mx:Canvas id="myJoinTeamPage" label="我加入的球队" >
				<team:TeamListBox id="myJoinTeamListBox" initialize="myJoinTeamListBox.refreshTeamList(User.currentUser.id)" width="100%" height="100%" sendBox="false"/>
		    </mx:Canvas>
		    <mx:Canvas label="邀请我的球队" >
		    	<team:TeamInvitationListBox dataProvider="{teamInvitationList}" width="100%" height="100%"/>
		    </mx:Canvas>
    	</mx:TabNavigator>
	</mx:VDividedBox>