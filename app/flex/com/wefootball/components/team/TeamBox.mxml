<?xml version="1.0" encoding="utf-8"?>
<mx:VDividedBox width="625" height="100%"  xmlns="*" xmlns:mx="http://www.adobe.com/2006/mxml" 
	initialize="refresh()" xmlns:message="com.wefootball.components.message.*" xmlns:team="com.wefootball.components.team.*">
<!--<mx:VBox>-->

<mx:Metadata>
	[Event(name="teamDisplay", type="com.wefootball.events.TeamDetailEvent")]
</mx:Metadata>

	   <mx:Script>
    	<![CDATA[
    		import mx.collections.ArrayCollection;
    		import mx.controls.LinkButton;
    		import com.wefootball.events.TeamDetailEvent;
    		import mx.controls.Alert;
    		import mx.rpc.events.ResultEvent;
    		import mx.rpc.events.FaultEvent;
    		import com.wefootball.events.UserDisplayEvent;
    		import com.wefootball.model.User;
    		import com.wefootball.model.Team;
    		import mx.collections.XMLListCollection;

			[Bindable]
    		private var teamList:ArrayCollection;		
			
     		public function refresh():void{	
     			Team.list(handleTeamListResult,handleTeamListFaultResult); 
     		}
     		public function handleTeamListResult(event:ResultEvent, tl:ArrayCollection):void{
     			this.teamList = tl; 
     		} 	
     		public function handleTeamListFaultResult(event:FaultEvent):void{
     			Alert.show("读取球队列表失败");
     		}
      		private function displayTeam(t:TeamDetailEvent):void {
      			Team.show(t.team.id,
		     		handleTeamDetailResult,
		     		handleTeamFaultDetailResult);
			} 
		  	private function handleTeamDetailResult(t:Team, event:ResultEvent):void{
		   		Team.TEAM_PARSER(event.result, Team.currentTeam);
		 	}
		 	private function handleTeamFaultDetailResult(event:FaultEvent):void{
		 		Alert.show("读取细节失败"); 			
		 	}
	 	
    	]]>
    </mx:Script>
		<mx:TabNavigator width="100%" height="49%" >
		    <mx:Canvas label="我加入的球队" >
				<team:TeamListBox teamDisplay="displayTeam(event)" dataProvider="{teamList}" 
					width="100%" height="100%" sendBox="false"/>
		    </mx:Canvas>
<!--		    <mx:Canvas label="邀请我的球队" >
		    	<team:TeamListBox messageDisplay="displayMessage(event)"
		    		dataProvider="{teamList}" width="100%" height="100%" sendBox="true"/>
		    </mx:Canvas>-->
    	</mx:TabNavigator>
	</mx:VDividedBox>